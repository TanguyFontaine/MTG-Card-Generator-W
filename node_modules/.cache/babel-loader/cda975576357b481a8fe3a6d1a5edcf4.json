{"ast":null,"code":"import React from'react';import{Image,Box,HStack,useStyleConfig,Center}from\"@chakra-ui/react\";import{isDefined}from'@chakra-ui/utils';/***************************************************************/import{Text}from\"../style_components/text\";import{frames}from\"../ressources/frames\";import{Symbol}from\"./symbol\";import logo from\"../ressources/logo_mini.png\";/***************************************************************/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function fileExtensionIsValid(imageFileName){var athorizedFileExtensions=[\"png\",\"jpeg\",\"jpg\",\"gif\",\"webp\"];var splitFileName=imageFileName.split('.');return athorizedFileExtensions.some(function(ext){return ext===splitFileName[splitFileName.length-1].toLowerCase();});}function DisplayImage(props){var imageFileName=props.imageFileName;var imageFileContent=props.imageFileContent;var imageCentering=props.imageCentering;// Do not display the error panel while an image has not been selected\nif(imageFileName===\"\"||fileExtensionIsValid(imageFileName)){return/*#__PURE__*/_jsx(Box,{height:\"416px\",width:\"566px\",position:\"relative\",top:\"-89.18%\",left:\"7%\"/*top=\"10.82%\" left=\"62.38%\"*/,children:/*#__PURE__*/_jsx(Image,{boxSize:\"inherit\",objectPosition:imageCentering,objectFit:\"cover\",alt:imageFileName,src:imageFileContent})});}return/*#__PURE__*/_jsxs(Text,{position:\"relative\",top:\"-75.18%\",left:\"10%\",fontSize:24,color:\"white\",noOfLines:2,children:[\"Invalid image file, supported extensions are :\",/*#__PURE__*/_jsx(\"br\",{}),\"png, jpg, jpeg, gif, webp\"]});}function retrieveCorrespondingFrameImage(frameColor,cardPower,cardToughness){// to retieve the frame with the power/toughness box or the frame without\nvar frameIndex=0;if(cardPower!==\"\"||cardToughness!==\"\"){frameIndex=1;}// By default take the colorless frame\nvar frameImage=frames[\"Colorless\"][frameIndex];if(isDefined(frameColor)&&frameColor!==\"\"){frameImage=frames[frameColor][frameIndex];}return frameImage;}// Take the spell descrition in param. It is a string whith the descritpion and encoded symbols\n// example : [Tap] : add [g]\n// returns a list of SymbolEments and Strings to be displayed\nfunction transformIntoElements(spellDescription,spellFontSize){var leftBraceSplit=spellDescription.split('[');var displayableElements=[];for(var i=0;i<leftBraceSplit.length;i++){var rightBraceSplit=leftBraceSplit[i].split(']');if(rightBraceSplit.length===2){// a symbol has been parsed, it is the left side of the ], the right is the rest of the description\nvar symbolCode=rightBraceSplit[0];var displayableSymbol=symbolCode===\"e\"?/*#__PURE__*/_jsx(Symbol,{symbolOnly:true,symbol:symbolCode}):/*#__PURE__*/_jsx(Symbol,{fontSize:\"big\",symbol:symbolCode});displayableElements=displayableElements.concat(displayableSymbol);displayableElements=displayableElements.concat(rightBraceSplit[1]);}else{displayableElements=displayableElements.concat(rightBraceSplit);}}return displayableElements;}export function CardImagePanel(props){var name=props.cardName;var nameFontSize=props.nameFontSize;var imageFileContent=props.imageFile.content;var imageFileName=props.imageFile.name;var imageCentering=props.imageCentering;var types=props.types;var superTypes=props.superTypes;var subTypes=props.subTypes;var typesFontSize=props.typesFontSize;var manaCost=props.manaCost;var colorlessManaAmount=props.colorlessManaAmount;var spellDescription=props.spellDescription;var spellFontSize=props.spellFontSize;var flavorText=props.flavorText;var flavorTextFontSize=props.flavorTextFontSize;var power=props.power;var toughness=props.toughness;var ptFontSize=props.ptFontSize;var selectedCardFrame=props.cardFrameColor;var typesItems=types.map(function(type){return/*#__PURE__*/_jsx(Text,{children:type});});var superTypesItems=superTypes.map(function(superTypes){return/*#__PURE__*/_jsx(Text,{children:superTypes});});var displayableManaCost=manaCost.map(function(symbol){return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Symbol,{symbol:symbol,shadow:true})});});// Formulas to display values at the rigths position \n//the mana cost at the right place\n// 96.8 is hard coded pos of the 1st mana symbol, 5.12 is the size of mana symbol with fontSize(24) \n// we do not forget the colorless mana that is not the mana cost list\nvar manaCostLeftPos=93.5-(manaCost.length+(colorlessManaAmount>-1?1:0))*5.12+\"%\";// adjust the power toughness position depending on the length of both values and the font size\nvar powerLeftPos=84.35-(power.length+toughness.length)/(35/ptFontSize)+\"%\";var powerTopPos=89+(3.4-ptFontSize*0.1)+\"%\";// adjust the name height pos depending on the font size \n// result = baseTopValue + ((defaultFontSize / 10) - (fontSize / 10))\nvar nameTopPos=4.8+(3.2-nameFontSize*0.1)+\"%\";var typesTopPos=56.85+(2.8-typesFontSize*0.1)+\"%\";var spellDescriptionLineHeight=2+(spellFontSize*0.04-2)+\"em\";var flavorTextLineHeight=1.34+(flavorTextFontSize*0.1-2.1)+\"em\";var displayableSpellDescription=transformIntoElements(spellDescription,spellFontSize);var style=useStyleConfig(\"CardImagePanel\");return/*#__PURE__*/_jsx(Box,{__css:style,h:\"100vh\",w:\"100%\",sx:{wordSpacing:\"0.2em\"},children:/*#__PURE__*/_jsxs(Box,{position:\"relative\",left:\"20%\",height:\"937px\",width:\"656px\",children:[/*#__PURE__*/_jsx(Image,{boxSize:\"inherit\",objectFit:\"fit\",src:retrieveCorrespondingFrameImage(selectedCardFrame,power,toughness)}),/*#__PURE__*/_jsx(DisplayImage,{imageFileName:imageFileName,imageFileContent:imageFileContent,imageCentering:imageCentering}),/*#__PURE__*/_jsx(Text,{pos:\"absolute\",top:nameTopPos,left:\"7%\",fontSize:nameFontSize,children:name}),/*#__PURE__*/_jsx(Box,{name:\"manaCost\",pos:\"absolute\",top:\"5.1%\",left:manaCostLeftPos,fontSize:24,children:/*#__PURE__*/_jsxs(HStack,{spacing:1,children:[colorlessManaAmount>-1?/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Symbol,{symbol:colorlessManaAmount,shadow:true})}):/*#__PURE__*/_jsx(Box,{}),/*#__PURE__*/_jsx(HStack,{spacing:1,children:displayableManaCost})]})}),/*#__PURE__*/_jsxs(HStack,{fontSize:typesFontSize,pos:\"absolute\",top:typesTopPos,left:\"7%\",spacing:\"0.3em\",children:[superTypesItems,typesItems,/*#__PURE__*/_jsx(Text,{children:subTypes})]}),/*#__PURE__*/_jsx(Image,{boxSize:\"44px\",pos:\"absolute\",top:\"56.2%\",left:\"87%\",src:logo}),/*#__PURE__*/_jsx(Box,{fontSize:spellFontSize,lineHeight:spellDescriptionLineHeight,sx:{wordSpacing:\"0.2em\"},children:/*#__PURE__*/_jsx(Text,{whiteSpace:\"pre-wrap\",fontFamily:\"EB Garamond\",fontWeight:400,pos:\"absolute\",top:\"64.5%\",left:\"8.5%\",width:\"84%\",children:displayableSpellDescription})}),/*#__PURE__*/_jsxs(HStack,{fontSize:ptFontSize,pos:\"absolute\",top:powerTopPos,left:powerLeftPos,spacing:1,children:[/*#__PURE__*/_jsxs(Text,{children:[power,\" \"]}),power!==\"\"||toughness!==\"\"?/*#__PURE__*/_jsx(Text,{children:\"/\"}):/*#__PURE__*/_jsx(Text,{}),/*#__PURE__*/_jsxs(Text,{children:[toughness,\" \"]})]}),/*#__PURE__*/_jsx(Box,{lineHeight:flavorTextLineHeight,sx:{wordSpacing:\"0.2em\"},children:/*#__PURE__*/_jsx(Text,{as:\"i\",fontSize:flavorTextFontSize,whiteSpace:\"pre-wrap\",fontFamily:\"EB Garamond\",fontWeight:400,pos:\"absolute\",top:\"76%\",left:\"8.5%\",width:\"82%\",children:flavorText})})]})});}","map":{"version":3,"sources":["C:/Visual Studio Projects/card-generator-tanguy/src/components/card_image_panel.jsx"],"names":["React","Image","Box","HStack","useStyleConfig","Center","isDefined","Text","frames","Symbol","logo","fileExtensionIsValid","imageFileName","athorizedFileExtensions","splitFileName","split","some","ext","length","toLowerCase","DisplayImage","props","imageFileContent","imageCentering","retrieveCorrespondingFrameImage","frameColor","cardPower","cardToughness","frameIndex","frameImage","transformIntoElements","spellDescription","spellFontSize","leftBraceSplit","displayableElements","i","rightBraceSplit","symbolCode","displayableSymbol","concat","CardImagePanel","name","cardName","nameFontSize","imageFile","content","types","superTypes","subTypes","typesFontSize","manaCost","colorlessManaAmount","flavorText","flavorTextFontSize","power","toughness","ptFontSize","selectedCardFrame","cardFrameColor","typesItems","map","type","superTypesItems","displayableManaCost","symbol","manaCostLeftPos","powerLeftPos","powerTopPos","nameTopPos","typesTopPos","spellDescriptionLineHeight","flavorTextLineHeight","displayableSpellDescription","style","wordSpacing"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Image, Box, HStack, useStyleConfig, Center } from \"@chakra-ui/react\"\r\nimport { isDefined } from '@chakra-ui/utils';\r\n/***************************************************************/\r\n\r\nimport { Text } from \"../style_components/text\"\r\nimport { frames } from \"../ressources/frames\"\r\nimport { Symbol } from \"./symbol\"\r\n\r\nimport logo from \"../ressources/logo_mini.png\" \r\n/***************************************************************/\r\n\r\nfunction fileExtensionIsValid(imageFileName) {\r\n\r\n    const athorizedFileExtensions = [\"png\", \"jpeg\", \"jpg\", \"gif\", \"webp\"]\r\n\r\n    const splitFileName = imageFileName.split('.')\r\n    return (athorizedFileExtensions.some(ext =>(ext === splitFileName[splitFileName.length - 1].toLowerCase())));\r\n}\r\n\r\nfunction DisplayImage(props) {\r\n    const imageFileName = props.imageFileName\r\n    const imageFileContent = props.imageFileContent\r\n    const imageCentering = props.imageCentering\r\n    \r\n    // Do not display the error panel while an image has not been selected\r\n    if (imageFileName === \"\" || fileExtensionIsValid(imageFileName)) {\r\n        return (\r\n            <Box height=\"416px\" width=\"566px\" position=\"relative\" top=\"-89.18%\" left=\"7%\" /*top=\"10.82%\" left=\"62.38%\"*/>\r\n                <Image boxSize=\"inherit\" objectPosition={imageCentering} objectFit=\"cover\" alt={imageFileName} src={imageFileContent}></Image>\r\n            </Box>\r\n        );\r\n    }\r\n    return (\r\n        <Text position=\"relative\" top=\"-75.18%\" left=\"10%\" fontSize={24} color=\"white\" noOfLines={2}>\r\n            Invalid image file, supported extensions are : \r\n            <br />\r\n            png, jpg, jpeg, gif, webp\r\n        </Text>\r\n    );\r\n}\r\n\r\nfunction retrieveCorrespondingFrameImage(frameColor, cardPower, cardToughness) {\r\n    // to retieve the frame with the power/toughness box or the frame without\r\n    let frameIndex = 0\r\n    if (cardPower !== \"\" || cardToughness !== \"\") {\r\n        frameIndex = 1\r\n    }\r\n    \r\n    // By default take the colorless frame\r\n    let frameImage = frames[\"Colorless\"][frameIndex]\r\n\r\n    if (isDefined(frameColor) && frameColor !== \"\") {\r\n        frameImage = frames[frameColor][frameIndex]\r\n    }\r\n\r\n    return frameImage\r\n}\r\n\r\n// Take the spell descrition in param. It is a string whith the descritpion and encoded symbols\r\n// example : [Tap] : add [g]\r\n// returns a list of SymbolEments and Strings to be displayed\r\nfunction transformIntoElements(spellDescription, spellFontSize) {\r\n    const leftBraceSplit = spellDescription.split('[');\r\n\r\n    let displayableElements = []\r\n    for\t(let i = 0; i < leftBraceSplit.length; i++)\r\n    {\r\n        const rightBraceSplit = leftBraceSplit[i].split(']')\r\n        \r\n        if (rightBraceSplit.length === 2) {\r\n            // a symbol has been parsed, it is the left side of the ], the right is the rest of the description\r\n            const symbolCode = rightBraceSplit[0]\r\n            const displayableSymbol = (symbolCode === \"e\") ? <Symbol symbolOnly={true} symbol={symbolCode}/> : <Symbol fontSize=\"big\" symbol={symbolCode}/>\r\n            displayableElements = displayableElements.concat(displayableSymbol)\r\n            displayableElements = displayableElements.concat(rightBraceSplit[1])\r\n        }\r\n        else {\r\n            displayableElements = displayableElements.concat(rightBraceSplit)\r\n        }\r\n    }\r\n\r\n    return (displayableElements);\r\n}\r\n\r\n\r\nexport function CardImagePanel(props) {\r\n\r\n    const name = props.cardName\r\n    const nameFontSize = props.nameFontSize\r\n    const imageFileContent = props.imageFile.content\r\n    const imageFileName = props.imageFile.name\r\n    const imageCentering = props.imageCentering\r\n    const types = props.types\r\n    const superTypes = props.superTypes\r\n    const subTypes = props.subTypes\r\n    const typesFontSize = props.typesFontSize\r\n    const manaCost = props.manaCost\r\n    const colorlessManaAmount = props.colorlessManaAmount\r\n    const spellDescription = props.spellDescription\r\n    const spellFontSize = props.spellFontSize\r\n    const flavorText = props.flavorText\r\n    const flavorTextFontSize = props.flavorTextFontSize\r\n    const power = props.power\r\n    const toughness = props.toughness\r\n    const ptFontSize  = props.ptFontSize\r\n    const selectedCardFrame = props.cardFrameColor\r\n\r\n    const typesItems = types.map((type) => <Text>{type}</Text>);\r\n    const superTypesItems = superTypes.map((superTypes) => <Text>{superTypes}</Text>);\r\n\r\n    const displayableManaCost = manaCost.map((symbol) => <Box><Symbol symbol={symbol} shadow={true}/></Box>);\r\n\r\n\r\n    // Formulas to display values at the rigths position \r\n    \r\n    //the mana cost at the right place\r\n    // 96.8 is hard coded pos of the 1st mana symbol, 5.12 is the size of mana symbol with fontSize(24) \r\n    // we do not forget the colorless mana that is not the mana cost list\r\n    const manaCostLeftPos = 93.5 - (manaCost.length + (colorlessManaAmount > -1 ? 1 : 0)) * 5.12 + \"%\"\r\n\r\n    // adjust the power toughness position depending on the length of both values and the font size\r\n    const powerLeftPos = 84.35 - ((power.length + toughness.length) / (35 / ptFontSize)) + \"%\"\r\n    const powerTopPos = 89 + (3.4 - ptFontSize * 0.1) + \"%\"\r\n\r\n    // adjust the name height pos depending on the font size \r\n    // result = baseTopValue + ((defaultFontSize / 10) - (fontSize / 10))\r\n    const nameTopPos = 4.8 + (3.2 - nameFontSize * 0.1) + \"%\"\r\n    const typesTopPos = 56.85 + (2.8 - typesFontSize * 0.1) + \"%\"\r\n    const spellDescriptionLineHeight = (2 + ((spellFontSize * 0.04) - 2)) + \"em\"\r\n    const flavorTextLineHeight = 1.34 + (flavorTextFontSize * 0.1 - 2.1) + \"em\"\r\n\r\n    const displayableSpellDescription = transformIntoElements(spellDescription, spellFontSize)\r\n\r\n    const style = useStyleConfig(\"CardImagePanel\")\r\n\r\n    return (\r\n        <Box __css={style} h=\"100vh\" w=\"100%\" sx={{wordSpacing: \"0.2em\"}}>\r\n            <Box position=\"relative\" left=\"20%\" height=\"937px\" width=\"656px\">\r\n                <Image boxSize=\"inherit\" objectFit=\"fit\" src={retrieveCorrespondingFrameImage(selectedCardFrame, power, toughness)}/>\r\n\r\n                <DisplayImage imageFileName={imageFileName} imageFileContent={imageFileContent} imageCentering={imageCentering}></DisplayImage>\r\n\r\n                <Text pos=\"absolute\" top={nameTopPos} left=\"7%\" fontSize={nameFontSize}>{name}</Text>\r\n\r\n                <Box name=\"manaCost\" pos=\"absolute\" top=\"5.1%\" left={manaCostLeftPos} fontSize={24}>\r\n                    <HStack spacing={1}>\r\n                        {colorlessManaAmount > -1 ? <Box><Symbol symbol={colorlessManaAmount} shadow={true}/></Box> : <Box />}\r\n                        <HStack spacing={1}> \r\n                            {displayableManaCost}\r\n                        </HStack>\r\n                    </HStack>\r\n                </Box>\r\n\r\n                <HStack fontSize={typesFontSize} pos=\"absolute\" top={typesTopPos} left=\"7%\" spacing=\"0.3em\">\r\n                    {superTypesItems}\r\n                    {typesItems}\r\n                    <Text>{subTypes}</Text> \r\n                </HStack>\r\n                <Image boxSize=\"44px\" pos=\"absolute\" top=\"56.2%\" left=\"87%\" src={logo}/>\r\n                \r\n                <Box fontSize={spellFontSize} lineHeight={spellDescriptionLineHeight} sx={{wordSpacing: \"0.2em\"}}>\r\n                    <Text whiteSpace=\"pre-wrap\" fontFamily=\"EB Garamond\" fontWeight={400} pos=\"absolute\" top=\"64.5%\" left=\"8.5%\" width=\"84%\" >{displayableSpellDescription}</Text>\r\n                </Box>   \r\n\r\n                <HStack fontSize={ptFontSize} pos=\"absolute\" top={powerTopPos} left={powerLeftPos} spacing={1}>\r\n                    <Text>{power} </Text>\r\n                    {power !== \"\" || toughness !== \"\" ? <Text>/</Text> : <Text/>}\r\n                    <Text>{toughness} </Text>\r\n                </HStack>\r\n\r\n                <Box lineHeight={flavorTextLineHeight} sx={{wordSpacing: \"0.2em\"}}>\r\n                    <Text as=\"i\" fontSize={flavorTextFontSize} whiteSpace=\"pre-wrap\" fontFamily=\"EB Garamond\" fontWeight={400} pos=\"absolute\" top=\"76%\" left=\"8.5%\" width=\"82%\" >{flavorText}</Text>\r\n                </Box>\r\n            </Box>\r\n        </Box>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}